import{u as O}from"./C9LG1XnO.js";import{r as B,o as U,I as J,c as x,v as l,x as n,y as e,J as y,K as b,z as c,H as R,L as X,C as Z,A as D,B as q}from"./DIkc0zba.js";import{_ as Q}from"./CnK0mgqx.js";import{_ as W}from"./DlAUqK2U.js";const tt={class:"min-h-screen bg-black text-white font-sans pb-20"},et={class:"max-w-7xl mx-auto px-4 pt-10"},st={class:"flex justify-between items-center mb-8 bg-[#050505] p-2 rounded-xl border border-white/5"},ot={class:"text-sm font-medium text-gray-400 ml-4"},lt={key:0,class:"animate-pulse text-blue-500"},nt={key:1},at={class:"flex bg-black rounded-lg p-1 border border-white/5"},it=["onClick"],rt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},ct={class:"flex items-center gap-2 text-gray-500 text-xs font-medium mb-2"},ut={class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},dt=["d"],ft={class:"text-3xl font-bold text-white mb-1 transition-all duration-300"},ht={class:"text-[10px] text-gray-600"},xt={class:"bg-[#050505] p-6 rounded-2xl border border-white/5 mb-6"},mt=e("div",{class:"text-sm font-bold text-white mb-6"},"Trading Volume Over Time",-1),_t={class:"relative h-64 w-full"},vt={class:"absolute left-0 top-0 h-full flex flex-col justify-between text-[9px] text-gray-700 font-mono pointer-events-none pb-6"},pt=e("span",null,"0",-1),yt={class:"ml-10 h-full relative"},bt={class:"w-full h-full",viewBox:"0 0 840 150",preserveAspectRatio:"none"},gt=R('<defs><linearGradient id="volGradient" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#3b82f6" stop-opacity="0.5"></stop><stop offset="100%" stop-color="#3b82f6" stop-opacity="0"></stop></linearGradient></defs><line x1="0" y1="37.5" x2="840" y2="37.5" stroke="#ffffff" stroke-opacity="0.03"></line><line x1="0" y1="75" x2="840" y2="75" stroke="#ffffff" stroke-opacity="0.03"></line><line x1="0" y1="112.5" x2="840" y2="112.5" stroke="#ffffff" stroke-opacity="0.03"></line>',4),wt=["d"],kt={class:"absolute bottom-[-20px] w-full flex justify-between text-[9px] text-gray-700 font-mono"},Mt={class:"bg-[#050505] p-6 rounded-2xl border border-white/5 mb-6"},$t=e("div",{class:"text-sm font-bold text-white mb-6"},"Trade Count Over Time",-1),Tt={class:"relative h-64 w-full"},Vt={class:"absolute left-0 top-0 h-full flex flex-col justify-between text-[9px] text-gray-700 font-mono pointer-events-none pb-6"},Ht=e("span",null,"0",-1),At={class:"ml-10 h-full relative"},Bt={class:"w-full h-full",viewBox:"0 0 840 150",preserveAspectRatio:"none"},zt=e("line",{x1:"0",y1:"37.5",x2:"840",y2:"37.5",stroke:"#ffffff","stroke-opacity":"0.03"},null,-1),Lt=e("line",{x1:"0",y1:"75",x2:"840",y2:"75",stroke:"#ffffff","stroke-opacity":"0.03"},null,-1),St=e("line",{x1:"0",y1:"112.5",x2:"840",y2:"112.5",stroke:"#ffffff","stroke-opacity":"0.03"},null,-1),Pt=["d"],jt=["cx","cy"],Dt={class:"absolute bottom-[-20px] w-full flex justify-between text-[9px] text-gray-700 font-mono"},Rt={class:"bg-[#050505] p-6 rounded-2xl border border-white/5 mb-6"},Ct=e("div",{class:"text-sm font-bold text-white mb-6"},"Buy vs Sell Volume",-1),Et={class:"relative h-64 w-full"},Nt=e("div",{class:"absolute left-0 top-0 h-full flex flex-col justify-between text-[9px] text-gray-700 font-mono pointer-events-none pb-6"},[e("span",null,"MAX"),e("span",null,"MID"),e("span",null,"0")],-1),Ft={class:"ml-10 h-full relative"},Gt={class:"w-full h-full",viewBox:"0 0 840 150",preserveAspectRatio:"none"},Yt=e("line",{x1:"0",y1:"37.5",x2:"840",y2:"37.5",stroke:"#ffffff","stroke-opacity":"0.03"},null,-1),It=e("line",{x1:"0",y1:"75",x2:"840",y2:"75",stroke:"#ffffff","stroke-opacity":"0.03"},null,-1),Kt=e("line",{x1:"0",y1:"112.5",x2:"840",y2:"112.5",stroke:"#ffffff","stroke-opacity":"0.03"},null,-1),Ot=["x","y","height"],Ut=["x","y","height"],Jt=R('<div class="flex justify-center gap-4 mt-6 text-[10px] font-bold"><div class="flex items-center gap-1 text-green-500"><div class="w-2 h-2 bg-green-500 rounded-sm"></div> Buy Volume ($) </div><div class="flex items-center gap-1 text-red-500"><div class="w-2 h-2 bg-red-500 rounded-sm"></div> Sell Volume ($) </div></div>',1),Xt={class:"bg-[#050505] p-6 rounded-2xl border border-white/5 mb-6"},Zt=e("div",{class:"text-sm font-bold text-white mb-6"},"Average Trade Size",-1),qt={class:"relative h-64 w-full"},Qt={class:"absolute left-0 top-0 h-full flex flex-col justify-between text-[9px] text-gray-700 font-mono pointer-events-none pb-6"},Wt=e("span",null,"0",-1),te={class:"ml-10 h-full relative"},ee={class:"w-full h-full",viewBox:"0 0 950 150",preserveAspectRatio:"none"},se=e("line",{x1:"0",y1:"37.5",x2:"950",y2:"37.5",stroke:"#ffffff","stroke-opacity":"0.03"},null,-1),oe=e("line",{x1:"0",y1:"75",x2:"950",y2:"75",stroke:"#ffffff","stroke-opacity":"0.03"},null,-1),le=e("line",{x1:"0",y1:"112.5",x2:"950",y2:"112.5",stroke:"#ffffff","stroke-opacity":"0.03"},null,-1),ne=["d"],ae=["cx","cy"],ie={class:"absolute bottom-[-20px] w-full flex justify-between text-[9px] text-gray-700 font-mono px-4"},re={__name:"index",setup(C){const z=["1h","3h","6h","12h","24h","48h"],m=B("24h"),f=B([]),g=B(!0),{getHistoryStats:E}=O();U(()=>L()),J(m,()=>L());async function L(){g.value=!0,f.value=[];try{const t=await E(m.value);Array.isArray(t)&&t.length>0?f.value=t:f.value=[]}catch(t){console.error("Failed to load trades",t),f.value=[]}finally{g.value=!1}}const N=x(()=>{const t=f.value;if(!t.length)return[{label:"Total Volume",value:g.value?"...":"$0.00",sub:"No data",icon:""},{label:"Total Trades",value:g.value?"...":"0",sub:"No data",icon:""},{label:"Est. Daily Volume",value:g.value?"...":"$0.00",sub:"Per 24h",icon:""},{label:"Est. Daily Trades",value:g.value?"...":"0",sub:"Per 24h",icon:""}];const a=t.reduce((d,_)=>d+_.size*_.price,0),s=t.length,o=parseInt(m.value)||24,r=o/24,u=r<=1?a*(24/o):a/r,i=r<=1?s*(24/o):s/r;return[{label:"Total Volume",value:p(a),sub:`Last ${m.value}`,icon:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},{label:"Total Trades",value:T(s),sub:`Last ${m.value}`,icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{label:"Est. Daily Volume",value:p(u),sub:"Per 24h",icon:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},{label:"Est. Daily Trades",value:T(Math.round(i)),sub:"Per 24h",icon:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}]});function S(t,a,s,o,r=20){if(!t.length)return[];const u=Array(r).fill(0),i=t[0].timestamp,_=t[t.length-1].timestamp-i||1;t.forEach(v=>{const A=v.timestamp-i,K=Math.min(Math.floor(A/_*r),r-1);u[K]+=o(v)});const h=Math.max(...u,1);return u.map((v,A)=>({x:A/(r-1)*a,y:s-v/h*(s-20)-10,val:v}))}const V=t=>{if(t.length<2)return"";let a=`M ${t[0].x} ${t[0].y}`;for(let s=1;s<t.length;s++){const o=t[s-1].x+(t[s].x-t[s-1].x)/2,r=t[s-1].y,u=t[s-1].x+(t[s].x-t[s-1].x)/2,i=t[s].y;a+=` C ${o} ${r}, ${u} ${i}, ${t[s].x} ${t[s].y}`}return a},w=x(()=>S(f.value,840,150,t=>t.size*t.price)),F=x(()=>w.value.length?`${V(w.value)} L 840,150 L 0,150 Z`:"M0,150 L840,150"),k=x(()=>w.value.length?Math.max(...w.value.map(t=>t.val)):0),M=x(()=>S(f.value,840,150,()=>1)),G=x(()=>V(M.value)),P=x(()=>M.value.length?Math.max(...M.value.map(t=>t.val)):0),Y=x(()=>{const t=f.value;if(!t.length)return[];const a=20,s=Array.from({length:a}).map((i,d)=>({x:d*42+10,buyH:0,sellH:0})),o=t[0].timestamp,r=t[t.length-1].timestamp;t.forEach(i=>{const d=Math.min(Math.floor((i.timestamp-o)/(r-o||1)*a),a-1),_=i.size*i.price;i.side==="BUY"?s[d].buyH+=_:s[d].sellH+=_});const u=Math.max(...s.map(i=>Math.max(i.buyH,i.sellH)),1);return s.map(i=>({x:i.x,buyH:i.buyH/u*120,sellH:i.sellH/u*120}))}),$=x(()=>{const t=f.value;if(!t.length)return[];const a=20,s=950,o=150,r=Array(a).fill(0).map(()=>({sum:0,count:0})),u=t[0].timestamp,i=t[t.length-1].timestamp;t.forEach(h=>{const v=Math.min(Math.floor((h.timestamp-u)/(i-u||1)*a),a-1);r[v].sum+=h.size*h.price,r[v].count+=1});const d=r.map(h=>h.count?h.sum/h.count:0),_=Math.max(...d,1);return d.map((h,v)=>({x:v/(a-1)*s,y:o-h/_*(o-30)-10,val:h}))}),I=x(()=>V($.value)),j=x(()=>$.value.length?Math.max(...$.value.map(t=>t.val)):0),H=x(()=>{const a=f.value;if(a.length<2)return Array(7).fill("--");const s=a[0].timestamp*1e3,r=(a[a.length-1].timestamp*1e3-s)/6;return Array.from({length:7}).map((u,i)=>{const d=new window.Date(s+r*i);return["1h","3h","6h"].includes(m.value)?d.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):d.toLocaleDateString([],{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})});function p(t){return t>=1e6?`$${(t/1e6).toFixed(2)}M`:t>=1e3?`$${(t/1e3).toFixed(1)}K`:`$${t.toFixed(2)}`}function T(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return(t,a)=>(l(),n("div",tt,[e("main",et,[e("div",st,[e("div",ot,[g.value?(l(),n("span",lt,"Live Updating...")):(l(),n("span",nt,"Time Range"))]),e("div",at,[(l(),n(y,null,b(z,s=>e("button",{key:s,onClick:o=>m.value=s,class:X(`px-4 py-1.5 rounded-md text-xs font-medium transition-colors ${s===m.value?"bg-blue-600 text-white shadow-lg shadow-blue-900/50":"text-gray-500 hover:text-white"}`)},c(s),11,it)),64))])]),e("div",rt,[(l(!0),n(y,null,b(N.value,(s,o)=>(l(),n("div",{key:o,class:"bg-[#050505] p-6 rounded-2xl border border-white/5"},[e("div",ct,[(l(),n("svg",ut,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:s.icon},null,8,dt)])),Z(" "+c(s.label),1)]),e("div",ft,c(s.value),1),e("div",ht,c(s.sub),1)]))),128))]),e("div",xt,[mt,e("div",_t,[e("div",vt,[e("span",null,c(p(k.value)),1),e("span",null,c(p(k.value*.75)),1),e("span",null,c(p(k.value*.5)),1),e("span",null,c(p(k.value*.25)),1),pt]),e("div",yt,[(l(),n("svg",bt,[gt,e("path",{d:F.value,fill:"url(#volGradient)",stroke:"#3b82f6","stroke-width":"2",class:"transition-all duration-500 ease-in-out"},null,8,wt)])),e("div",kt,[(l(!0),n(y,null,b(H.value,(s,o)=>(l(),n("span",{key:o},c(s),1))),128))])])])]),e("div",Mt,[$t,e("div",Tt,[e("div",Vt,[e("span",null,c(T(Math.round(P.value))),1),e("span",null,c(T(Math.round(P.value*.5))),1),Ht]),e("div",At,[(l(),n("svg",Bt,[zt,Lt,St,e("path",{d:G.value,fill:"none",stroke:"#10b981","stroke-width":"2",class:"transition-all duration-500"},null,8,Pt),(l(!0),n(y,null,b(M.value,(s,o)=>(l(),n("circle",{key:o,cx:s.x,cy:s.y,r:"2.5",fill:"#000",stroke:"#10b981","stroke-width":"2"},null,8,jt))),128))])),e("div",Dt,[(l(!0),n(y,null,b(H.value,(s,o)=>(l(),n("span",{key:o},c(s),1))),128))])])])]),e("div",Rt,[Ct,e("div",Et,[Nt,e("div",Ft,[(l(),n("svg",Gt,[Yt,It,Kt,(l(!0),n(y,null,b(Y.value,(s,o)=>(l(),n("g",{key:o,class:"transition-all duration-500"},[e("rect",{x:s.x,y:150-s.buyH,width:"12",height:s.buyH,fill:"#22c55e"},null,8,Ot),e("rect",{x:s.x+14,y:150-s.sellH,width:"12",height:s.sellH,fill:"#ef4444"},null,8,Ut)]))),128))])),Jt])])]),e("div",Xt,[Zt,e("div",qt,[e("div",Qt,[e("span",null,c(p(j.value)),1),e("span",null,c(p(j.value*.5)),1),Wt]),e("div",te,[(l(),n("svg",ee,[se,oe,le,e("path",{d:I.value,fill:"none",stroke:"#f59e0b","stroke-width":"2",class:"transition-all duration-500"},null,8,ne),(l(!0),n(y,null,b($.value,(s,o)=>(l(),n("circle",{key:o,cx:s.x,cy:s.y,r:"2.5",fill:"#000",stroke:"#f59e0b","stroke-width":"2"},null,8,ae))),128))])),e("div",ie,[(l(!0),n(y,null,b(H.value,(s,o)=>(l(),n("span",{key:o},c(s),1))),128))])])])])])]))}},ce={};function ue(C,z){const m=re,f=Q;return l(),n("div",null,[D(f,{page:"history"},{default:q(()=>[D(m)]),_:1})])}const me=W(ce,[["render",ue]]);export{me as default};
